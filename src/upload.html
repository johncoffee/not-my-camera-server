<!doctype html>
<html>
<head>
    <meta charset="utf-8">
</head>
<body>
<form method="POST" action="/api/image" enctype="multipart/form-data">
    <p> <input type="number" name="alpha" placeholder="alpha">
    <p> <input type="number" name="beta"  placeholder="beta">
    <p> <input type="number" name="gamma" placeholder="gamma">
    <p> Take a photo
        <input name=filefield type="file" accept="image/*" capture="camera">
    <p><input type="submit">
</form>


<script src="//raw.githubusercontent.com/johncoffee/deviceapi-normaliser/master/deviceapi-normaliser.js"></script>

<script type="text/javascript">

  // these are holder objects we can load the values into
  var current_orientation = null;
  var current_motion = null;

  var fps = 24;
  var refresh_freq = 1000 / fps; //msec to update the screen

  window.addEventListener("load", function(event) {
    let $ = document.querySelector

        window.setInterval(function() {

        // update the various elements in the page at a predefined
        // frequency.

        if (current_motion !== null) {

          $(`[name="alpha"]`).setAttribute(current_motion.rotationRate.alpha)
          $(`[name="beta"]` ).setAttribute(current_motion.rotationRate.beta)
          $(`[name="gamma"]`).setAttribute(current_motion.rotationRate.gamma)

          $("#interval").text(current_motion.interval);
        }
      }, refresh_freq);

  });

</script>

</body>
</html>
